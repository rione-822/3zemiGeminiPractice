# 開発ログ

このドキュメントは、広告消しゲームの開発における主な変更点と機能追加、およびバグ修正の記録です。

## 1. ゲームの基本構造の構築
- ホーム画面、ゲーム画面、リザルト画面の基本的なHTML構造とCSSスタイルを定義しました。
- ゲーム開始・終了のロジック（タイマー、スコア表示、画面遷移）を実装しました。

## 2. 広告タイプの追加
- **通常広告:** 基本的な「×」ボタンで消える広告を実装しました。
- **フェードイン広告:** 徐々に表示される広告を実装しました。
- **擬似ダウンロードボタン広告:** 本物のダウンロードボタンに似たデザインで、クリックするとペナルティが発生する広告を実装しました。

## 3. ゲームモードの変更（無料ダウンロードサイトモード）
- ゲームのコンセプトを「無料ダウンロードサイトの模擬ページから本物のダウンロードボタンを見つける」形式に変更しました。
- 模擬ウェブサイトのHTML構造とCSSスタイルを調整し、コンテンツの上に広告が重なるようにしました。
- ゲームクリア条件を「本物のダウンロードボタンをクリックする」に設定しました。
- 広告を消しても新しい広告は出現しないように変更しました。

## 4. バグ修正と機能改善

### 4.1. 偽ダウンロードボタンの状態リセット
- **問題:** ゲームをリスタートした際に、一度「ウイルスに感染しました」と表示された偽ダウンロードボタンが元の状態に戻らないバグがありました。
- **修正:** `index.html`に`data-original-text`属性を追加し、`script.js`の`startGame`関数内でこの属性を利用してボタンのテキストと色を初期状態に戻すように修正しました。

### 4.2. スコア計算の改善
- ゲームクリア時に、残り時間に応じたボーナススコア（`timeLeft * 100`）が加算されるようにしました。

### 4.3. ボタン・広告の位置ランダム化
- 模擬ウェブサイトのレイアウトを維持したまま、偽ダウンロードボタンと本物のダウンロードボタンの表示順序がゲームごとにランダムになるように実装しました。

### 4.4. ペナルティの変更（スコア減点から時間減少へ）
- 広告本体をクリックした場合、および偽ダウンロードボタンをクリックした場合のペナルティを、スコア減点から「残り時間の減少」に変更しました。
  - 広告本体クリック: 残り時間5秒減少
  - 偽ダウンロードボタンクリック: 残り時間10秒減少
- 残り時間が0以下になった場合にゲームオーバーとなる条件を追加しました。

### 4.5. 効果音の連続再生問題の解消
- **問題:** 短い効果音を連続して再生しようとした際に、2回目以降の音が鳴らない場合があるバグがありました。
- **修正:** `playSound`ヘルパー関数を導入し、効果音を再生するたびに`Audio`オブジェクトを新しく作成（または複製）することで、連続再生が可能になりました。

## 5. 効果音の追加
- 以下のイベントに効果音を追加しました。
  - 広告を消した時（成功音: `success.mp3`）
  - 広告本体をクリックした時（失敗音: `fail.mp3`）
  - 偽ダウンロードボタンをクリックした時（ウイルス音: `virus.mp3`）
  - 本物のダウンロードボタンをクリックしてゲームクリアした時（クリア音: `clear.mp3`）
  - 制限時間切れでゲームオーバーになった時（ゲームオーバー音: `gameover.mp3`）
  - ゲーム開始ボタン/リトライボタンをクリックした時（ボタンクリック音: `button_click.mp3`）

---